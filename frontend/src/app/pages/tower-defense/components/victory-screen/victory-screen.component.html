<div class="victory-screen" *ngIf="gameState().status === 'VICTORY' || gameState().status === 'DEFEAT'">
  <div class="overlay"></div>
  <div class="modal">
    <div class="header" [class.victory]="gameState().status === 'VICTORY'" [class.defeat]="gameState().status === 'DEFEAT'">
      <h1 class="title">{{ gameState().status === 'VICTORY' ? 'ğŸ‰ VICTOIRE !' : 'ğŸ’€ DÃ‰FAITE' }}</h1>
      <p class="subtitle" *ngIf="gameState().status === 'VICTORY'">
        Le Village NIRD rÃ©siste aux BigTech ! ğŸ§
      </p>
      <p class="subtitle" *ngIf="gameState().status === 'DEFEAT'">
        Les BigTech ont pris le contrÃ´le... Pour l'instant !
      </p>
    </div>

    <div class="stats-container">
      <h2 class="section-title">ğŸ“Š Statistiques de la RÃ©sistance</h2>
      
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ğŸ’°</div>
          <div class="stat-content">
            <div class="stat-value">{{ formatCurrency(gameState().stats.budgetSaved) }}</div>
            <div class="stat-label">Budget Ã©conomisÃ©</div>
            <div class="stat-description">Licences BigTech Ã©vitÃ©es</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">ğŸŒ±</div>
          <div class="stat-content">
            <div class="stat-value">{{ gameState().stats.co2Saved.toFixed(2) }} tonnes</div>
            <div class="stat-label">CO2 Ã©conomisÃ©</div>
            <div class="stat-description">â‰ˆ {{ (gameState().stats.co2Saved * 12).toFixed(0) }} arbres plantÃ©s</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">â™»ï¸</div>
          <div class="stat-content">
            <div class="stat-value">{{ gameState().stats.pcReconditioned }}</div>
            <div class="stat-label">PC reconditionnÃ©s</div>
            <div class="stat-description">SauvÃ©s de l'obsolescence</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">ğŸ¯</div>
          <div class="stat-content">
            <div class="stat-value">{{ accuracyPercent }}%</div>
            <div class="stat-label">PrÃ©cision</div>
            <div class="stat-description">{{ gameState().stats.successfulShots }}/{{ gameState().stats.totalShots }} tirs rÃ©ussis</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">ğŸ’€</div>
          <div class="stat-content">
            <div class="stat-value">{{ gameState().stats.enemiesKilled }}</div>
            <div class="stat-label">Menaces neutralisÃ©es</div>
            <div class="stat-description">BigTech vaincues</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">âš¡</div>
          <div class="stat-content">
            <div class="stat-value">{{ gameState().stats.maxCombo }}x</div>
            <div class="stat-label">Meilleur combo</div>
            <div class="stat-description">Tirs consÃ©cutifs</div>
          </div>
        </div>

        <div class="stat-card stat-highlight">
          <div class="stat-icon">ğŸ›ï¸</div>
          <div class="stat-content">
            <div class="stat-value">{{ gameState().stats.autonomyGained }}%</div>
            <div class="stat-label">Autonomie numÃ©rique</div>
            <div class="stat-description">IndÃ©pendance des BigTech</div>
          </div>
        </div>

        <div class="stat-card stat-highlight">
          <div class="stat-icon">{{ getRatingIcon() }}</div>
          <div class="stat-content">
            <div class="stat-value">{{ finalScore }}</div>
            <div class="stat-label">Score final</div>
            <div class="stat-description">Note: {{ getRatingText() }}</div>
          </div>
        </div>
      </div>

      <div class="achievements" *ngIf="achievements.length > 0">
        <h3 class="achievements-title">ğŸ† SuccÃ¨s dÃ©bloquÃ©s</h3>
        <div class="achievements-list">
          <div class="achievement" *ngFor="let achievement of achievements">
            {{ achievement }}
          </div>
        </div>
      </div>

      <div class="message">
        <p *ngIf="gameState().status === 'VICTORY'">
          Bravo ! Votre Ã©tablissement a su rÃ©sister Ã  la pression des BigTech et adopter un numÃ©rique 
          <strong>Inclusif, Responsable et Durable</strong>. C'est exactement la vision de la dÃ©marche NIRD !
        </p>
        <p *ngIf="gameState().status === 'DEFEAT'">
          Ne baissez pas les bras ! La rÃ©sistance numÃ©rique est un combat continu. 
          Rejoignez la communautÃ© NIRD pour partager vos expÃ©riences et apprendre des autres Ã©tablissements.
        </p>
      </div>

      <div class="actions">
        <button class="btn btn-primary" (click)="restart()">
          ğŸ”„ Rejouer
        </button>
        <button class="btn btn-secondary" (click)="learnMore()">
          ğŸ“š En savoir plus sur NIRD
        </button>
      </div>
    </div>
  </div>
</div>
